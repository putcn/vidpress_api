openapi: 3.0.0
info:
  title: 视频生成任务
  version: '1.0'
  description: 视频生成任务API
servers:
  - url: 'http://vidpress_api_server/v1'
    description: ''
paths:
  /task:
    get:
      summary: 获取视频生成任务列表
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Paged_tasks'
      description: 返回任务列表.
      parameters:
        - schema:
            type: number
          in: query
          name: page
          description: 'page number, 20 per page'
        - schema:
            type: string
          in: query
          name: task_ids
          description: 'comma seperated task ids, e.g. 1,2,3'
    post:
      summary: 创建视频生成任务
      responses:
        '200':
          description: 任务创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '509':
          description: Bandwidth Limit Exceeded (Apache)
      description: |
        创建一个视频生成任务. 配置中支持callback_url, 在任务有任何更新的时候request该url; 支持设定任务优先级, 3为普通优先级, 2为高优先级. 原则上支持1和0, 若非必要请勿占用. 
        创建视频任务支持不提供數據到news_url (EX: news_url="", field 是 required, 但可以empty), 这样会创建一个空任务, 请通过task upload接口上传所需media, 然后call alignment接口来对齐媒体和文字并生成视频

        Vidpress 提供部分自定義模塊，使用方法是在 "extra_config" 中添加配置。 

        开头视频

        Vidpress支持自定义开头视频,使用方法是在extra_config中,提供以下两个参数
        {
        "Video/CUSTOM_TITLE_PATH":"https://www.example.com/intro.mov",
        "DEFAULT/TITLE_DURATION":3
        }
        请注意这两个参数需要一起导入,不然开头会无法正确播放。这个是由于一些legacy issue,导致我们不直接采用视频的长度,目前希望能在下一版本修复。

        片尾视频

        Vidpress支持自定义片尾视频,提供的视频会在最后播放,片尾视频播放时,会同时播放片尾视频自带的音乐,背景音乐会在播放片尾视频前fadeout.
        使用方法是在extra_config中,提供以下参数

        {
        "Production/CUSTOM_ENDING_PATH":"https://www.example.com/outro.mov",
        }

        跟片头不一样,这里只需要CUSTOM_ENDING_PATH就够了


        台标

        Vidpress支持自定义台标图片,目前台标只支持图片,不支持视频类（包括GIF）,导入后会在左上或右上放入台标图片,台标只会在视频Body里出现,片头片尾都不会展现台标。
        使用方法是在extra_config中,提供以下参数

        {
        "Production/CUSTOM_LOGO_PATH":"http://www.example.com/baidu.png",
        "Production/LOGO_MARGIN":"20",
        "Production/LOGO_POS":"top-left",
        }

        LOGO_MARGIN为optional,default是0,会同时指定上方和左右的margin.如果需要呈现上方和左右是不同数值的margin,请更改台标图片,将margin内崁到图里。
        LOGO_POS为optional,可用的数值为["top-left","top-right"],default是top-left。


        字幕块

        Vidpress支持自定义字幕块图片,目前字幕块只支持图片,不支持视频类（包括GIF）,导入后会在下方正中放入字幕块图片,Vidpress不对字幕块图片做任何处理,请确保字幕块的长宽高是符合最终呈现的大小,建议大小约为1280x130上下,字幕块只会在视频Body里出现,片头片尾都不会展现字幕块。
        使用方法是在extra_config中,提供以下参数

        {
        "Production/CUSTOM_CAPTION_BG_PATH":"https://www.example.com/cap_bg.png",
        }

        背景音乐

        Vidpress支持自定义背景音乐,背景音乐只会在视频Body里出现,片头片尾都不会拨出背景音乐。如果背景音乐的长度不够视频的长度,会自动重复歌曲。
        使用方法是在extra_config中,提供以下参数

        {
        "Production/CUSTOM_BG_MUSIC_PATH":"https://www.example.com/bg.mp3",
        }
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Task_config'
    parameters: []
  '/task/{task_id}':
    parameters:
      - type: string
        name: task_id
        in: path
        required: true
        schema:
          type: number
        description: task id
    get:
      summary: 获取视频生成任务
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
              examples: {}
        '404':
          description: 任务没找到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      description: 返回task对象.
    post:
      summary: 重新生成视频
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '404':
          description: 任务未找到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      description: 重新生成视频. 请在更新了summary后者timeline之后重新生成视频. 支持跟新task_config来更改任务优先级
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Task_config'
    delete:
      summary: 终止视频生成任务
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
              examples:
                success message:
                  value:
                    code: 200
                    message: task deleted
      description: 终止任务.
  '/task/{task_id}/summary':
    parameters:
      - type: string
        name: task_id
        in: path
        required: true
    get:
      summary: 获取视频生成任务文章摘要
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Summary'
      description: 获取当前任务的文章摘要.
    post:
      summary: 更新视频生成任务的文章摘要.
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Summary'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Summary'
      description: 更新当前任务的文章摘要并重新生成视频.
  '/task/{task_id}/timeline':
    parameters:
      - type: string
        name: task_id
        in: path
        required: true
    get:
      summary: 获取视频生成任务时间轴
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timeline'
      description: 获取任务时间轴.
    post:
      summary: 更新任务时间轴.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timeline'
      description: 更新任务时间轴并重新生成视频.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Timeline'
  '/task/{task_id}/upload/{filename}':
    parameters:
      - type: string
        name: task_id
        in: path
        required: true
      - schema:
          type: string
        name: filename
        in: path
    post:
      summary: 视频生成任务文件上传
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                description: file_name
                properties:
                  media_path:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: ''
      parameters:
        - schema: {}
          in: query
          name: file
          required: true
          description: 文件
      description: '上传文件到task中, 可以指定上传之后的文件名, 返回值为此文件在任务中的media_path'
  '/task/{task_id}/alignment':
    parameters:
      - type: string
        name: task_id
        in: path
        required: true
    get:
      summary: 获取视频生成任务图文对齐数据
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alignment'
      requestBody: {}
    post:
      summary: 上传图文对齐数据
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alignment'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Alignment'
      description: '设定图片和文字对齐数据. 注意, 上传此项将覆盖自动媒体查找和对齐过程, 完全手动设定文字和媒体. media path可以是已经上传完成的文件路径(相对), 或者URL'
    delete:
      summary: 删除手动对齐数据
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
              examples:
                success message:
                  value:
                    code: 200
                    message: alignment deleted
      description: '删除手动对齐数据, 恢复使用自动对齐'
  '/task/{task_id}/rough_timeline':
    parameters:
      - schema:
          type: string
        name: task_id
        in: path
        required: true
    get:
      summary: 获取视频生成任务图文粗略对齐
      tags: []
      responses:
        '200':
          description: OK
        '204':
          description: No Content
      operationId: get-task-task_id-rough_timeline
      description: 获取之前提供的rough timeline任务时间轴.
    post:
      summary: 更新视频生成任务文件资源
      operationId: post-task-task_id-rough_timeline
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timeline'
      description: |-
        更新当前任务的文章摘要，视频与图片并重新生成视频.

        与一般的 /task/{task_id}/timeline 不同点在于
        /timeline 不会再对 timeline 进行任何处理，用户需要确定所有 timeline.json 里提供的档案都已透过 /upload/{filename} 上传过。

        /roug_timeline 则是会读取 caption_tracks 里的文字，重新生成 TTS，按照最终 TTS duraiton 微调 media tracks 的 duration. media tracks 里提供的 media_path也可以是 URL，系统会帮助用户下载。
  '/task/{task_id}/resource/{file_path}':
    parameters:
      - schema:
          type: string
        name: task_id
        in: path
        required: true
      - schema:
          type: string
        name: file_path
        in: path
        required: true
    get:
      summary: 获取视频生成任务文件资源
      tags: []
      responses:
        '200':
          description: File body
        '404':
          description: Not Found
      operationId: get-task-task_id-resource
      description: |-
        下載對應{file_path}的檔案。
        雖可以只加一個檔案名，但強烈建議將上傳的檔案放在 raw_materials 目錄下。

        raw_materials 目錄是每一個任務儲存 resource 檔案的地方，為求統一，請盡可能地利用 raw_materials 儲存你上傳的檔案

        {file_path} 是以 task 的主目錄為基準，即與 vidpress.ini, news.json and raw_materials 的 directory. 

        基本應用：
        /task/{task_id}/resource/raw_materials/image1.jpeg

        如果 {file_path} 是指向一個目錄，return 404

        如果 {file_path} 用了 /../, return 404
    post:
      summary: 上传视频生成任务文件资源
      operationId: post-task-task_id-resource
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  file_path:
                    type: string
        '404':
          description: Not Found
        '409':
          description: Conflict
      description: |-
        上传文件到task中 到對應{file_path}的位址, 可以指定上传之后的文件名, 返回值为此文件在任务中的 file_path

        {file_path} 是以 task 的主目錄為基準，即與 vidpress.ini, news.json and raw_materials 的 directory. 
        雖可以只加一個檔案名，但強烈建議將上傳的檔案放在 raw_materials 目錄下。
        raw_materials 目錄是每一個任務儲存 resource 檔案的地方，為求統一，請盡可能地利用 raw_materials 儲存你上傳的檔案

        基本應用：
        /task/{task_id}/resource/raw_materials/image2.jpeg # 上傳 file content 到 raw_materials/image2.jpeg 的位址。

        同時更新 media.json，下次請求 /task/{task_id}/resource 時，也會包括這檔案。

        如果 {file_path} 是指向一個目錄，return 404

        如果 {file_path} 是指向一個以建立的檔案，return 409 (conflict)，請使用 PUT 來更新文件

        如果 {file_path} 用了 /../, return 404
      parameters:
        - schema: {}
          in: query
          name: file
          description: 文件
          required: true
    delete:
      summary: 删除视频生成任务文件资源
      operationId: delete-task-task_id-resource
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  file_path:
                    type: string
        '404':
          description: Not Found
      description: |-
        刪除已有在 {file_path} 的檔案. 

        如果 {file_path} 還未存在，return 404

        如果 {file_path} 是指向一個目錄，return 404

        如果 {file_path} 用了 /../, return 404
    put:
      summary: 更新视频生成任务文件资源
      operationId: put-task-task_id-resource-filename
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  file_path:
                    type: string
        '404':
          description: Not Found
      description: |-
        更新已有的 file content. 

        更新 task 中對應 {file_path} 位址的文件, 返回值为此文件在任务中的 file_path

        {file_path} 是以 task 的主目錄為基準，即與 vidpress.ini, news.json and raw_materials 的 directory. 
        雖可以只加一個檔案名，但強烈建議將上傳的檔案放在 raw_materials 目錄下。
        raw_materials 目錄是每一個任務儲存 resource 檔案的地方，為求統一，請盡可能地利用 raw_materials 儲存你上傳的檔案

        如果 {file_path} 還未存在，將會建立檔案

        如果 {file_path} 是指向一個目錄，return 404

        如果 {file_path} 用了 /../, return 404
      parameters:
        - schema: {}
          in: query
          name: file
          description: 文件
          required: true
  '/task/{task_id}/resource':
    parameters:
      - schema:
          type: string
        name: task_id
        in: path
        required: true
    get:
      summary: 获取视频生成任务文件资源列表
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resource_folder'
              examples:
                simpel example:
                  value:
                    result:
                      - type: video
                        filepath: raw_materials/title.mov
        '404':
          description: Not Found
      operationId: get-task-task_id-resource
      description: |-
        返回可用的 resource candidates 列表 (media.json)

        possible types: "video", "image

        以下為例子
        {
          "resource_list": 
          [
            {
              "type": "video",
              "file_path": "raw_materials/11e4be2236c446b99b3d20e2f1cc9750.3.jpeg"
            },
            {media2...},
            {media3...}
          ]
        }

        file_path 的數值，可以用在 /task/{task_id}/resource/{filename} 這個接口上
  '/task/{task_id}/topics':
    parameters:
      - schema:
          type: string
        name: task_id
        in: path
        required: true
    get:
      summary: 获取话题类视频生成任务
      tags: []
      responses: {}
      operationId: get-task-task_id-topics
    post:
      summary: 设定话题类视频生成任务
      operationId: post-task-task_id-topics
      responses:
        '200':
          description: OK
      description: '设定图片和文字对齐数据. 注意, 上传此项将覆盖自动媒体查找和对齐过程, 完全手动设定文字和媒体. media path可以是已经上传完成的文件路径(相对), 或者URL'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Topic'
components:
  schemas:
    Error:
      title: Error
      type: object
      properties:
        code:
          type: integer
          description: 错误代码
        message:
          type: string
          description: 错误描述
      description: 错误
    Production_report:
      title: Production_report
      type: object
      description: 视频生成过程报告
      properties:
        start:
          type: string
          description: 生成开始时间
        end:
          type: string
          description: 结束时间
        duration:
          type: string
          description: 生成过程时长
        steps:
          type: array
          description: 生成过程每一步耗时
          items:
            type: object
            properties:
              name:
                type: string
                description: 步骤名称
              start:
                type: string
                description: 步骤开始时间
              end:
                type: string
                description: 步骤结束时间
              duration:
                type: string
                description: 步骤时长
        metadata:
          type: object
          properties:
            GIT_VERSION:
              type: string
              description: vidpress git 版本
            GIT_BRANCH:
              type: string
              description: vidpress git branch name
            API error count:
              description: api 错误个数
              type: string
            duplicated image count:
              type: string
              description: 重复图片个数
            timeline gaps count:
              type: string
              description: 时间轴空白时间段个数
            timeline gaps:
              type: array
              description: 空白时间段和相关素材
              items: {}
        start_timestamp:
          type: number
          format: float
          description: 开始时间的时间戳
        end_timestamp:
          type: number
          format: float
          description: 结束时间的时间戳
    Progress:
      title: Progress
      type: object
      description: 视频生成进度. task callback the url 中会post此数据
      properties:
        percentage:
          type: integer
          description: 0~100
        message:
          type: string
          description: 此进度描述
        task_id:
          type: number
        status:
          type: string
          enum:
            - waiting
            - in_progress
            - completed
    Summary:
      title: Summary
      type: object
      description: 生成tts的文章摘要
      properties:
        summary:
          type: string
          description: 文章摘要
      required:
        - summary
    Task_config:
      title: Task_config
      type: object
      description: 视频生成任务参数
      x-examples:
        配置 example:
          news_url: 'http://baijiahao.baidu.com/s?id=1665004266650805432'
          tts_per: '4106'
          duration: '120'
          priority: 3
          extra_config:
            Video/CUSTOM_TITLE_PATH: 'https://video-generation-background-audio.s3-us-west-1.amazonaws.com/intro.mov'
            Production/CUSTOM_ENDING_PATH: 'https://video-generation-background-audio.s3-us-west-1.amazonaws.com/outro.mov'
            Production/CUSTOM_BG_MUSIC_PATH: 'https://s3-us-west-1.amazonaws.com/video-generation-background-audio/汽车.mp3'
            Production/CUSTOM_LOGO_PATH: 'http://www.baidu.com/img/baidu_resultlogo@2.png'
            Production/LOGO_MARGIN: '20'
            Production/LOGO_POS: top-left
            DEFAULT/TITLE_DURATION: 4
        配置 empty news_url，custom alignment 可以使用這個方式來建立 task placeholder:
          news_url: ''
          tts_per: '4106'
          duration: '120'
          priority: 3
      properties:
        news_url:
          type: string
          description: '新闻url, 目前只支持百家号url, 可以为空'
        tts_per:
          type: integer
          description: '发音人代码, 0: 度小美, 1: 度小宇, 3: 度逍遥, 4: 度丫丫, 100: 度小雯(鸽子), 106: 度博文, 103: 度米朵. 默认值为100'
        duration:
          type: integer
          description: '目标视频时长, 单位秒'
        callback_url:
          type: string
          description: 任务有progress时候的callback url
          format: uri
        priority:
          type: number
          default: 3
          description: '任务优先级, 3为普通优先级, 2为高优先级. 原则上支持1和0, 若非必要请勿占用. '
          enum:
            - 2
            - 3
          example: '3'
        summary:
          type: string
          description: 'provide customized summary. when this field is provided, vidpress''s summarization will be disabled for this task'
        image_tag:
          type: string
          example: renminribao-1.0.1
        extra_config:
          type: object
          example: '{''ALIGNMENT/MAX_SOURCE_CONFIDENCE'':4}'
          description: 'Extra_config, 用於添加自訂義開頭影片, 片尾影片, 台標, 字幕塊等配置。每一個 extra_configs 的 key 必須用 <section>/<option> 的格式配置。'
          properties:
            Video/CUSTOM_TITLE_PATH:
              type: string
              description: |
                开头视频

                Vidpress支持自定义开头视频,使用方法是在extra_config中,提供以下两个参数

                {
                "Video/CUSTOM_TITLE_PATH":"https://www.example.com/intro.mov",
                "DEFAULT/TITLE_DURATION":3
                }

                请注意这两个参数需要一起导入,不然开头会无法正确播放。这个是由于一些legacy issue,导致我们不直接采用视频的长度,目前希望能在下一版本修复。
            DEFAULT/TITLE_DURATION:
              type: number
              description: |
                开头视频

                Vidpress支持自定义开头视频,使用方法是在extra_config中,提供以下两个参数

                {
                "Video/CUSTOM_TITLE_PATH":"https://www.example.com/intro.mov",
                "DEFAULT/TITLE_DURATION":3
                }

                请注意这两个参数需要一起导入,不然开头会无法正确播放。这个是由于一些legacy issue,导致我们不直接采用视频的长度,目前希望能在下一版本修复。
            Production/CUSTOM_ENDING_PATH:
              type: string
              description: |-
                片尾视频

                Vidpress支持自定义片尾视频,提供的视频会在最后播放,片尾视频播放时,会同时播放片尾视频自带的音乐,背景音乐会在播放片尾视频前fadeout.
                使用方法是在extra_config中,提供以下参数

                {
                "Production/CUSTOM_ENDING_PATH":"https://www.example.com/outro.mov",
                }

                跟片头不一样,这里只需要CUSTOM_ENDING_PATH就够了
            Production/CUSTOM_LOGO_PATH:
              type: string
              description: |-
                台标

                Vidpress支持自定义台标图片,目前台标只支持图片,不支持视频类（包括GIF）,导入后会在左上或右上放入台标图片,台标只会在视频Body里出现,片头片尾都不会展现台标。

                使用方法是在extra_config中,提供以下参数

                {
                "Production/CUSTOM_LOGO_PATH":"http://www.example.com/baidu.png",
                "Production/LOGO_MARGIN":"20",
                "Production/LOGO_POS":"top-left",
                }

                LOGO_MARGIN为optional,default是0,会同时指定上方和左右的margin.如果需要呈现上方和左右是不同数值的margin,请更改台标图片,将margin内崁到图里。

                LOGO_POS为optional,可用的数值为["top-left","top-right"],default是top-left。
            Production/LOGO_MARGIN:
              type: number
              description: 'LOGO_MARGIN为optional,default是0,会同时指定上方和左右的margin.如果需要呈现上方和左右是不同数值的margin,请更改台标图片,将margin内崁到图里。'
            Production/LOGO_POS:
              type: string
              description: 'LOGO_POS为optional,可用的数值为["top-left","top-right"],default是top-left。'
            Production/CUSTOM_CAPTION_BG_PATH:
              type: string
              description: |-
                字幕块
                Vidpress 支持自定义字幕块图片,目前字幕块只支持图片,不支持视频类（包括GIF）,导入后会在下方正中放入字幕块图片,Vidpress 不对字幕块图片做任何处理,请确保字幕块的长宽高是符合最终呈现的大小,建议大小约为1280x130上下,字幕块只会在视频Body里出现,片头片尾都不会展现字幕块。
                使用方法是在extra_config中,提供以下参数

                {
                "Production/CUSTOM_CAPTION_BG_PATH":"https://www.example.com/cap_bg.png",
                }
            Production/CUSTOM_BG_MUSIC_PATH:
              type: string
              description: |-
                背景音乐

                Vidpress支持自定义背景音乐,背景音乐只会在视频Body里出现,片头片尾都不会拨出背景音乐。如果背景音乐的长度不够视频的长度,会自动重复歌曲。
                使用方法是在extra_config中,提供以下参数

                {
                "Production/CUSTOM_BG_MUSIC_PATH":"https://www.example.com/bg.mp3",
                }
        source:
          type: array
          example: 'current-url, current-url-host, lib-vidpress, lib-renminribao, internet'
          items:
            type: string
        expected_output:
          type: string
          enum:
            - extraction
            - timeline
            - video
          example: video
        title:
          type: string
        content:
          type: array
          items:
            $ref: '#/components/schemas/Paragraph'
        resolution:
          type: string
          description: |-
            Type: String
            Default 1280x720

            Resolution should follow [width]x[height] format
            EX: 640x360, 或是 1280x720
      required:
        - news_url
        - tts_per
        - duration
    Task:
      title: Task
      type: object
      description: 视频生成任务
      properties:
        id:
          type: integer
          description: task id
        config:
          $ref: '#/components/schemas/Task_config'
        status:
          oneOf:
            - description: waiting
            - description: in_progress
            - description: completed
          type: string
        estimation:
          type: object
          description: 任务时间预期
          properties:
            start_time:
              type: integer
              description: '预期的排队结束时间, 时间戳'
            finish_time:
              type: integer
              description: '预期的视频生成完成时间, 时间戳'
        progress:
          type: array
          items:
            $ref: '#/components/schemas/Progress'
        result:
          oneOf:
            - type: 'null'
            - $ref: '#/components/schemas/Video'
          description: '视频生产结果, 如果视频尚未生成或者生成失败此项为null'
        error:
          oneOf:
            - type: 'null'
            - $ref: '#/components/schemas/Error'
          description: '任务错误描述, 如果尚未有错误此项为null'
        production_report:
          oneOf:
            - type: 'null'
            - $ref: '#/components/schemas/Production_report'
          description: '视频生产过程报告, 包括开始结束时间, 时长, 版本信息等. 生成没有完成之前此项为null'
      x-examples: {}
    Timeline:
      title: Timeline
      type: object
      description: '对时间轴的描述. 请注意, 此json中client需要关心的就是下面列出来的字段. 在tracks中有type为''audio''的, 请勿更改他们在列表中的顺序. 调整素材顺序的话请只调整type为''video''和''image''的track.'
      properties:
        tracks:
          type: array
          items:
            type: object
            properties:
              media_path:
                type: string
              media_url:
                type: string
                format: uri
              start:
                type: string
              duration:
                type: number
                format: float
                example: '3.5'
              type:
                type: string
                enum:
                  - video
                  - audio
                  - image
                example: video
    Video:
      title: Video
      type: object
      description: 生成的视频
      properties:
        url:
          type: string
          description: 视频文件url
        cover_url:
          type: string
          description: ' 视频封面url'
        duration:
          type: integer
          description: '视频时长, 单位为秒'
        title:
          type: string
          description: 视频标题
        summary:
          type: string
        category:
          type: string
        timeline_url:
          type: string
          description: url to fetch time
    Paged_tasks:
      title: Paged_tasks
      type: object
      properties:
        count:
          type: integer
        next:
          type: string
          format: uri
          description: 下一页内容url
        previous:
          type: string
          format: uri
          description: 上一页内容url
        results:
          type: array
          items:
            $ref: ''
    Alignment:
      title: Alignment
      type: object
      description: 手动媒体与文本对齐
      properties:
        alignment:
          type: array
          items:
            type: object
            properties:
              text:
                type: string
                description: 本段对应的文本
              media:
                type: array
                description: 'list of media path, can be either url or relative path'
                items:
                  type:
                    - string
                    - object
                  description: '数组成员可以是media url的string, 也可以是{url:''<media url>'', expected_duration:<duration in second>}'
                  properties:
                    url:
                      type: string
                    expected_duration:
                      type: number
                  required:
                    - url
            required:
              - text
    Resource_folder:
      title: resource_list
      type: object
      x-examples:
        example1:
          result:
            - type: file
              path: path1
            - type: folder
              path: path2
      description: Media Resouce folder of a project.
      properties:
        'resource_list ':
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              file_path:
                type: string
    Topic:
      title: Topics
      type: object
      description: |-
        使用 media list and queries 来制作视频
        目前 queries 只是 place holder.
      properties:
        topics:
          type: object
          properties:
            media:
              type: array
              description: list of media path
              items:
                type: object
                description: ''
                properties:
                  url:
                    type: string
                  expected_duration:
                    type: number
                    description: optional
                  type:
                    type: string
                    description: video or image
                required:
                  - url
                  - type
            expected_duration:
              type: string
              description: 'optional: if set, Vidpress will try its best to fix all the media into the final video with the expected_duration.'
            queries:
              type: array
              description: User can also input a list of queries.
              items:
                type: object
                properties:
                  query:
                    type: string
                  value:
                    type: string
      required:
        - topics
    Paragraph:
      title: Paragraph
      type: object
      properties:
        type:
          type: string
          default: text
        data:
          type: string
          description: 'can be media url, media path, or paragraph text itself'
      required:
        - type
      x-examples:
        text type:
          type: text
          data: 能够看到，沙溢找到自己的座位之后，第一件事情就是把自己的准考证放在桌子上面，而且镜头还拍摄了一些准考证上面的信息，虽然这只是一个恶搞版本，但乍一看，还是有些真实的，毕业中学是奔跑中学，考场则是666考场，还是非常搞笑的，但照片却非常的逼真，使用了一张沙溢年轻时候的照片，所以也是被很多的粉丝调侃：差点以为是真的！
        image type:
          type: image
          data: 'http://foo.bar/a.jpg'
  securitySchemes: {}
